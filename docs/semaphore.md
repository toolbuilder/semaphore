<!-- Generated by documentation.js. pnpx documentation build src/mutex.js -f md > API.md. Then manually corrected and edited. -->

# Table of Contents

* [Mutex][3]
  * [constructor](#constructor)
  * [available][5]
  * [acquireSync][6]
  * [acquire][8]
* [Semaphore][9]
  * [constructor](#constructor-1)
  * [available][11]
  * [acquireSync][12]
  * [acquire][13]
  * [release][14]

## Mutex

Simple mutex class.

```javascript
const mutex = new Mutex()
const release = await mutex.acquire()
release() // to release mutex
```

### Constructor

Constructor takes no parameters.

### available

Determine if the lock is available.

Returns **[boolean][21]** true if lock is available, false otherwise

### acquireSync

Get a lock if available.

Returns **() => void** if the lock is available, returns a function to release it. Otherwise returns null. The release function can be called multiple times, it will only release once.

```javascript
const mutex = new Mutex()
const release = mutex.acquireSync()
if (release) release()
```

### acquire

Acquire a lock.

Returns **PromiseLike<() => void>** - returns a Promise that resolves to a release function. The release function can be called multiple times, it will only release once.

```javascript
const mutex = new Mutex()
const release = await mutex.acquire()
release()
```

## Semaphore

```javascript
const semaphore = new Semaphore(3) // 3 locks
await semaphore.acquire()
semaphore.release()
```

### Constructor

* `max`   (optional, default `1`)

### available

Returns whether a lock is available. If one is available,
acquireSync will succeed.

Returns **[boolean][21]** true if a lock is available, false otherwise

### acquireSync

Acquires a lock synchronously.

Returns **[boolean][21]** true if lock was acquired, false otherwise

### acquire

Acquires a lock asynchronously.

Returns **PromiseLike\<void>** promise resolves when a lock has been acquired.

### release

Releases a lock so that it is available to be acquired.
Each acquire or acquireSync call must be matched by exactly one release call.

Returns **void**

[2]: #parameters

[3]: #mutex

[4]: #examples

[5]: #available

[6]: #acquiresync

[7]: #examples-1

[8]: #acquire

[9]: #semaphore

[10]: #parameters-1

[11]: #available-1

[12]: #acquiresync-1

[13]: #acquire-1

[14]: #release

[21]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[22]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number
